"use strict";const e=require("./base/Exchange"),{ExchangeError:t}=require("./base/errors");module.exports=class extends e{describe(){return this.deepExtend(super.describe(),{id:"paymium",name:"Paymium",countries:["FR","EU"],rateLimit:2e3,version:"v1",has:{CORS:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27790564-a945a9d4-5ff9-11e7-9d2d-b635763f2f24.jpg",api:"https://paymium.com/api",www:"https://www.paymium.com",doc:["https://github.com/Paymium/api-documentation","https://www.paymium.com/page/developers"]},api:{public:{get:["countries","data/{id}/ticker","data/{id}/trades","data/{id}/depth","bitcoin_charts/{id}/trades","bitcoin_charts/{id}/depth"]},private:{get:["merchant/get_payment/{UUID}","user","user/addresses","user/addresses/{btc_address}","user/orders","user/orders/{UUID}","user/price_alerts"],post:["user/orders","user/addresses","user/payment_requests","user/price_alerts","merchant/create_payment"],delete:["user/orders/{UUID}/cancel","user/price_alerts/{id}"]}},markets:{"BTC/EUR":{id:"eur",symbol:"BTC/EUR",base:"BTC",quote:"EUR"}},fees:{trading:{maker:.0059,taker:.0059}}})}async fetchBalance(e={}){let t=await this.privateGetUser(),s={info:t},i=Object.keys(this.currencies);for(let e=0;e<i.length;e++){let a=i[e],r=a.toLowerCase(),d=this.account(),o="balance_"+r,c="locked_"+r;o in t&&(d.free=t[o]),c in t&&(d.used=t[c]),d.total=this.sum(d.free,d.used),s[a]=d}return this.parseBalance(s)}async fetchOrderBook(e,t,s={}){let i=await this.publicGetDataIdDepth(this.extend({id:this.marketId(e)},s));return this.parseOrderBook(i,void 0,"bids","asks","price","amount")}async fetchTicker(e,t={}){let s=await this.publicGetDataIdTicker(this.extend({id:this.marketId(e)},t)),i=1e3*s.at,a=this.safeFloat(s,"vwap"),r=this.safeFloat(s,"volume"),d=r*a,o=this.safeFloat(s,"price");return{symbol:e,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(s,"high"),low:this.safeFloat(s,"low"),bid:this.safeFloat(s,"bid"),bidVolume:void 0,ask:this.safeFloat(s,"ask"),askVolume:void 0,vwap:a,open:this.safeFloat(s,"open"),close:o,last:o,previousClose:void 0,change:void 0,percentage:this.safeFloat(s,"variation"),average:void 0,baseVolume:r,quoteVolume:d,info:s}}parseTrade(e,t){let s=1e3*parseInt(e.created_at_int),i="traded_"+t.base.toLowerCase();return{info:e,id:e.uuid,order:void 0,timestamp:s,datetime:this.iso8601(s),symbol:t.symbol,type:void 0,side:e.side,price:e.price,amount:e[i]}}async fetchTrades(e,t,s,i={}){let a=this.market(e),r=await this.publicGetDataIdTrades(this.extend({id:a.id},i));return this.parseTrades(r,a,t,s)}async createOrder(e,t,s,i,a,r={}){let d={type:this.capitalize(t)+"Order",currency:this.marketId(e),direction:s,amount:i};"market"!==t&&(d.price=a);let o=await this.privatePostUserOrders(this.extend(d,r));return{info:o,id:o.uuid}}async cancelOrder(e,t,s={}){return await this.privateDeleteUserOrdersUUIDCancel(this.extend({UUID:e},s))}sign(e,t="public",s="GET",i={},a,r){let d=this.urls.api+"/"+this.version+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));if("public"===t)Object.keys(o).length&&(d+="?"+this.urlencode(o));else{this.checkRequiredCredentials();let e=this.nonce().toString(),t=e+d;"POST"===s&&Object.keys(o).length&&(t+=r=this.json(o)),a={"Api-Key":this.apiKey,"Api-Signature":this.hmac(this.encode(t),this.encode(this.secret)),"Api-Nonce":e,"Content-Type":"application/json"}}return{url:d,method:s,body:r,headers:a}}async request(e,s="public",i="GET",a={},r,d){let o=await this.fetch2(e,s,i,a,r,d);if("errors"in o)throw new t(this.id+" "+this.json(o));return o}};
//# sourceMappingURL=paymium.js.map
"use strict";const e=require("./base/Exchange"),{ExchangeError:t}=require("./base/errors");module.exports=class extends e{describe(){return this.deepExtend(super.describe(),{id:"anxpro",name:"ANXPro",countries:["JP","SG","HK","NZ"],version:"2",rateLimit:1500,has:{CORS:!1,fetchOHLCV:!1,fetchTrades:!1,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27765983-fd8595da-5ec9-11e7-82e3-adb3ab8c2612.jpg",api:"https://anxpro.com/api",www:"https://anxpro.com",doc:["http://docs.anxv2.apiary.io","https://anxpro.com/pages/api"]},api:{public:{get:["{currency_pair}/money/ticker","{currency_pair}/money/depth/full","{currency_pair}/money/trade/fetch"]},private:{post:["{currency_pair}/money/order/add","{currency_pair}/money/order/cancel","{currency_pair}/money/order/quote","{currency_pair}/money/order/result","{currency_pair}/money/orders","money/{currency}/address","money/{currency}/send_simple","money/info","money/trade/list","money/wallet/history"]}},markets:{"BTC/USD":{id:"BTCUSD",symbol:"BTC/USD",base:"BTC",quote:"USD",multiplier:1e5},"BTC/HKD":{id:"BTCHKD",symbol:"BTC/HKD",base:"BTC",quote:"HKD",multiplier:1e5},"BTC/EUR":{id:"BTCEUR",symbol:"BTC/EUR",base:"BTC",quote:"EUR",multiplier:1e5},"BTC/CAD":{id:"BTCCAD",symbol:"BTC/CAD",base:"BTC",quote:"CAD",multiplier:1e5},"BTC/AUD":{id:"BTCAUD",symbol:"BTC/AUD",base:"BTC",quote:"AUD",multiplier:1e5},"BTC/SGD":{id:"BTCSGD",symbol:"BTC/SGD",base:"BTC",quote:"SGD",multiplier:1e5},"BTC/JPY":{id:"BTCJPY",symbol:"BTC/JPY",base:"BTC",quote:"JPY",multiplier:1e5},"BTC/GBP":{id:"BTCGBP",symbol:"BTC/GBP",base:"BTC",quote:"GBP",multiplier:1e5},"BTC/NZD":{id:"BTCNZD",symbol:"BTC/NZD",base:"BTC",quote:"NZD",multiplier:1e5},"LTC/BTC":{id:"LTCBTC",symbol:"LTC/BTC",base:"LTC",quote:"BTC",multiplier:1e5},"STR/BTC":{id:"STRBTC",symbol:"STR/BTC",base:"STR",quote:"BTC",multiplier:1e8},"XRP/BTC":{id:"XRPBTC",symbol:"XRP/BTC",base:"XRP",quote:"BTC",multiplier:1e8},"DOGE/BTC":{id:"DOGEBTC",symbol:"DOGE/BTC",base:"DOGE",quote:"BTC",multiplier:1e8}},fees:{trading:{maker:.003,taker:.006}}})}async fetchBalance(e={}){let t=(await this.privatePostMoneyInfo()).data,r=Object.keys(t.Wallets),a={info:t};for(let e=0;e<r.length;e++){let i=r[e],s=this.account();if(i in t.Wallets){let e=t.Wallets[i];s.free=parseFloat(e.Available_Balance.value),s.total=parseFloat(e.Balance.value),s.used=s.total-s.free}a[i]=s}return this.parseBalance(a)}async fetchOrderBook(e,t,r={}){let a=(await this.publicGetCurrencyPairMoneyDepthFull(this.extend({currency_pair:this.marketId(e)},r))).data,i=parseInt(a.dataUpdateTime),s=parseInt(i/1e3);return this.parseOrderBook(a,s,"bids","asks","price","amount")}async fetchTicker(e,t={}){let r=(await this.publicGetCurrencyPairMoneyTicker(this.extend({currency_pair:this.marketId(e)},t))).data,a=parseInt(r.dataUpdateTime),i=parseInt(a/1e3),s=this.safeFloat(r.buy,"value"),o=this.safeFloat(r.sell,"value"),n=parseFloat(r.vol.value),l=parseFloat(r.last.value);return{symbol:e,timestamp:i,datetime:this.iso8601(i),high:parseFloat(r.high.value),low:parseFloat(r.low.value),bid:s,bidVolume:void 0,ask:o,askVolume:void 0,vwap:void 0,open:void 0,close:l,last:l,previousClose:void 0,change:void 0,percentage:void 0,average:parseFloat(r.avg.value),baseVolume:n,quoteVolume:void 0,info:r}}async fetchTrades(e,r,a,i={}){throw new t(this.id+" switched off the trades endpoint, see their docs at http://docs.anxv2.apiary.io/reference/market-data/currencypairmoneytradefetch-disabled")}async createOrder(e,t,r,a,i,s={}){let o=this.market(e),n={currency_pair:o.id,amount_int:parseInt(1e8*a)};"limit"===t&&(n.price_int=parseInt(i*o.multiplier)),n.type="buy"===r?"bid":"ask";let l=await this.privatePostCurrencyPairMoneyOrderAdd(this.extend(n,s));return{info:l,id:l.data}}async cancelOrder(e,t,r={}){return await this.privatePostCurrencyPairMoneyOrderCancel({oid:e})}getAmountMultiplier(e){return"BTC"===e?1e8:"LTC"===e?1e8:"STR"===e?1e8:"XRP"===e?1e8:"DOGE"===e?1e8:100}async withdraw(e,t,r,a,i={}){this.checkAddress(r),await this.loadMarkets();let s=this.getAmountMultiplier(e),o=await this.privatePostMoneyCurrencySendSimple(this.extend({currency:e,amount_int:parseInt(t*s),address:r},i));return{info:o,id:o.data.transactionId}}nonce(){return this.milliseconds()}sign(e,t="public",r="GET",a={},i,s){let o=this.implodeParams(e,a),n=this.omit(a,this.extractParams(e)),l=this.urls.api+"/"+this.version+"/"+o;if("public"===t)Object.keys(n).length&&(l+="?"+this.urlencode(n));else{this.checkRequiredCredentials();let e=this.nonce();s=this.urlencode(this.extend({nonce:e},n));let t=this.base64ToBinary(this.secret),r=o+"\0"+s,a=this.hmac(this.encode(r),t,"sha512","base64");i={"Content-Type":"application/x-www-form-urlencoded","Rest-Key":this.apiKey,"Rest-Sign":this.decode(a)}}return{url:l,method:r,body:s,headers:i}}async request(e,r="public",a="GET",i={},s,o){let n=await this.fetch2(e,r,a,i,s,o);if(void 0!==n&&"result"in n&&"success"===n.result)return n;throw new t(this.id+" "+this.json(n))}};
//# sourceMappingURL=anxpro.js.map
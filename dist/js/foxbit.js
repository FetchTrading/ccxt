"use strict";const e=require("./base/Exchange"),{ExchangeError:t}=require("./base/errors");module.exports=class extends e{describe(){return this.deepExtend(super.describe(),{id:"foxbit",name:"FoxBit",countries:"BR",has:{CORS:!1,createMarketOrder:!1},rateLimit:1e3,version:"v1",urls:{logo:"https://user-images.githubusercontent.com/1294454/27991413-11b40d42-647f-11e7-91ee-78ced874dd09.jpg",api:{public:"https://api.blinktrade.com/api",private:"https://api.blinktrade.com/tapi"},www:"https://foxbit.exchange",doc:"https://blinktrade.com/docs"},comment:"Blinktrade API",api:{public:{get:["{currency}/ticker","{currency}/orderbook","{currency}/trades"]},private:{post:["D","F","U2","U4","U6","U18","U24","U26","U30","U34","U70"]}},markets:{"BTC/VEF":{id:"BTCVEF",symbol:"BTC/VEF",base:"BTC",quote:"VEF",brokerId:1,broker:"SurBitcoin"},"BTC/VND":{id:"BTCVND",symbol:"BTC/VND",base:"BTC",quote:"VND",brokerId:3,broker:"VBTC"},"BTC/BRL":{id:"BTCBRL",symbol:"BTC/BRL",base:"BTC",quote:"BRL",brokerId:4,broker:"FoxBit"},"BTC/PKR":{id:"BTCPKR",symbol:"BTC/PKR",base:"BTC",quote:"PKR",brokerId:8,broker:"UrduBit"},"BTC/CLP":{id:"BTCCLP",symbol:"BTC/CLP",base:"BTC",quote:"CLP",brokerId:9,broker:"ChileBit"}},options:{brokerId:"4"}})}async fetchBalance(e={}){let t=await this.privatePostU2({BalanceReqID:this.nonce()}),r=this.safeValue(t.Responses,this.options.brokerId),i={info:t};if(void 0!==r){let e=Object.keys(this.currencies_by_id);for(let t=0;t<e.length;t++){let s=e[t],o=this.currencies_by_id[s].code;if(s in r){let e=this.account();e.used=1e-8*parseFloat(r[s+"_locked"]),e.total=1e-8*parseFloat(r[s]),e.free=e.total-e.used,i[o]=e}}}return this.parseBalance(i)}async fetchOrderBook(e,t,r={}){let i=this.market(e),s=await this.publicGetCurrencyOrderbook(this.extend({currency:i.quote,crypto_currency:i.base},r));return this.parseOrderBook(s)}async fetchTicker(e,t={}){let r=this.market(e),i=await this.publicGetCurrencyTicker(this.extend({currency:r.quote,crypto_currency:r.base},t)),s=this.milliseconds(),o="vol_"+r.quote.toLowerCase(),a=this.safeFloat(i,"last");return{symbol:e,timestamp:s,datetime:this.iso8601(s),high:this.safeFloat(i,"high"),low:this.safeFloat(i,"low"),bid:this.safeFloat(i,"buy"),bidVolume:void 0,ask:this.safeFloat(i,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:a,last:a,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(i,"vol"),quoteVolume:parseFloat(i[o]),info:i}}parseTrade(e,t){let r=1e3*e.date;return{id:this.safeString(e,"tid"),info:e,timestamp:r,datetime:this.iso8601(r),symbol:t.symbol,type:void 0,side:e.side,price:e.price,amount:e.amount}}async fetchTrades(e,t,r,i={}){let s=this.market(e),o=await this.publicGetCurrencyTrades(this.extend({currency:s.quote,crypto_currency:s.base},i));return this.parseTrades(o,s,t,r)}async createOrder(e,r,i,s,o,a={}){if("market"===r)throw new t(this.id+" allows limit orders only");let c=this.market(e),n="buy"===i?"1":"2",d={ClOrdID:this.nonce(),Symbol:c.id,Side:n,OrdType:"2",Price:o,OrderQty:s,BrokerID:c.brokerId},l=await this.privatePostD(this.extend(d,a));return{info:l,id:this.indexBy(l.Responses,"MsgType")[8].OrderID}}async cancelOrder(e,t,r={}){return await this.privatePostF(this.extend({ClOrdID:e},r))}sign(e,t="public",r="GET",i={},s,o){let a=this.urls.api[t]+"/"+this.version+"/"+this.implodeParams(e,i),c=this.omit(i,this.extractParams(e));if("public"===t)Object.keys(c).length&&(a+="?"+this.urlencode(c));else{this.checkRequiredCredentials();let t=this.nonce().toString(),r=this.extend({MsgType:e},c);o=this.json(r),s={APIKey:this.apiKey,Nonce:t,Signature:this.hmac(this.encode(t),this.encode(this.secret)),"Content-Type":"application/json"}}return{url:a,method:r,body:o,headers:s}}async request(e,r="public",i="GET",s={},o,a){let c=await this.fetch2(e,r,i,s,o,a);if("Status"in c&&200!==c.Status)throw new t(this.id+" "+this.json(c));return c}};
//# sourceMappingURL=foxbit.js.map
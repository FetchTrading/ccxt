"use strict";const e=require("./base/Exchange");module.exports=class extends e{describe(){return this.deepExtend(super.describe(),{id:"negociecoins",name:"NegocieCoins",countries:"BR",rateLimit:1e3,version:"v3",has:{fetchOrder:!0,fetchOrders:!0,fetchOpenOrders:!0,fetchClosedOrders:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/38008571-25a6246e-3258-11e8-969b-aeb691049245.jpg",api:{public:"https://broker.negociecoins.com.br/api/v3",private:"https://broker.negociecoins.com.br/tradeapi/v1"},www:"https://www.negociecoins.com.br",doc:["https://www.negociecoins.com.br/documentacao-tradeapi","https://www.negociecoins.com.br/documentacao-api"],fees:"https://www.negociecoins.com.br/comissoes"},api:{public:{get:["{PAR}/ticker","{PAR}/orderbook","{PAR}/trades","{PAR}/trades/{timestamp_inicial}","{PAR}/trades/{timestamp_inicial}/{timestamp_final}"]},private:{get:["user/balance","user/order/{orderId}"],post:["user/order","user/orders"],delete:["user/order/{orderId}"]}},markets:{"B2X/BRL":{id:"b2xbrl",symbol:"B2X/BRL",base:"B2X",quote:"BRL"},"BCH/BRL":{id:"bchbrl",symbol:"BCH/BRL",base:"BCH",quote:"BRL"},"BTC/BRL":{id:"btcbrl",symbol:"BTC/BRL",base:"BTC",quote:"BRL"},"BTG/BRL":{id:"btgbrl",symbol:"BTG/BRL",base:"BTG",quote:"BRL"},"DASH/BRL":{id:"dashbrl",symbol:"DASH/BRL",base:"DASH",quote:"BRL"},"LTC/BRL":{id:"ltcbrl",symbol:"LTC/BRL",base:"LTC",quote:"BRL"}},fees:{trading:{maker:.003,taker:.004},funding:{withdraw:{BTC:.001,BCH:3e-5,BTG:9e-5,LTC:.005}}},limits:{amount:{min:.001,max:void 0}},precision:{amount:8,price:8}})}parseTicker(e,t){let i=1e3*e.date,s=void 0!==t?t.symbol:void 0,a=this.safeFloat(e,"last");return{symbol:s,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:a,last:a,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"vol"),quoteVolume:void 0,info:e}}async fetchTicker(e,t={}){await this.loadMarkets();let i=this.market(e),s=await this.publicGetPARTicker(this.extend({PAR:i.id},t));return this.parseTicker(s,i)}async fetchOrderBook(e,t,i={}){await this.loadMarkets();let s=await this.publicGetPAROrderbook(this.extend({PAR:this.marketId(e)},i));return this.parseOrderBook(s,void 0,"bid","ask","price","quantity")}parseTrade(e,t){let i=1e3*e.date,s=this.safeFloat(e,"price"),a=this.safeFloat(e,"amount"),r=t.symbol,o=parseFloat(this.costToPrecision(r,s*a));return{timestamp:i,datetime:this.iso8601(i),symbol:r,id:this.safeString(e,"tid"),order:void 0,type:"limit",side:e.type.toLowerCase(),price:s,amount:a,cost:o,fee:void 0,info:e}}async fetchTrades(e,t,i,s={}){await this.loadMarkets();let a=this.market(e);void 0===t&&(t=0);let r={PAR:a.id,timestamp_inicial:parseInt(t/1e3)},o=await this.publicGetPARTradesTimestampInicial(this.extend(r,s));return this.parseTrades(o,a,t,i)}async fetchBalance(e={}){await this.loadMarkets();let t=await this.privateGetUserBalance(e),i={info:t},s=Object.keys(t);for(let e=0;e<s.length;e++){let a=s[e],r=t[a],o=this.commonCurrencyCode(a),d={free:parseFloat(r.total),used:0,total:parseFloat(r.available)};d.used=d.total-d.free,i[o]=d}return this.parseBalance(i)}parseOrder(e,t){let i=void 0;t||(t=this.safeValue(this.marketsById,e.pair))&&(i=t.symbol);let s=this.parse8601(e.created),a=this.safeFloat(e,"price"),r=this.safeFloat(e,"quantity"),o=this.safeFloat(e,"total"),d=this.safeFloat(e,"pending_quantity"),n=this.safeFloat(e,"executed_quantity"),h=e.status;h="filled"===h?"closed":"cancelled"===h?"canceled":"open";return{id:e.id.toString(),datetime:this.iso8601(s),timestamp:s,lastTradeTimestamp:void 0,status:h,symbol:i,type:"limit",side:e.type,price:a,cost:o,amount:r,filled:n,remaining:d,trades:void 0,fee:{currency:t.quote,cost:this.safeFloat(e,"fee")},info:e}}async createOrder(e,t,i,s,a,r={}){await this.loadMarkets();let o=this.market(e),d=await this.privatePostUserOrder(this.extend({pair:o.id,price:this.priceToPrecision(e,a),volume:this.amountToPrecision(e,s),type:i},r)),n=this.parseOrder(d[0],o),h=n.id;return this.orders[h]=n,n}async cancelOrder(e,t,i={}){await this.loadMarkets();let s=this.markets[t],a=await this.privateDeleteUserOrderOrderId(this.extend({orderId:e},i));return this.parseOrder(a[0],s)}async fetchOrder(e,t,i={}){await this.loadMarkets();let s=await this.privateGetUserOrderOrderId(this.extend({orderId:e},i));return this.parseOrder(s[0])}async fetchOrders(e,t,i,s={}){await this.loadMarkets();let a=this.market(e),r={pair:a.id};void 0!==t&&(r.startDate=this.ymd(t)),void 0!==i&&(r.pageSize=i);let o=await this.privatePostUserOrders(this.extend(r,s));return this.parseOrders(o,a)}async fetchOpenOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({status:"pending"},s))}async fetchClosedOrders(e,t,i,s={}){return await this.fetchOrders(e,t,i,this.extend({status:"filled"},s))}nonce(){return this.milliseconds()}sign(e,t="public",i="GET",s={},a,r){let o=this.urls.api[t]+"/"+this.implodeParams(e,s),d=this.omit(s,this.extractParams(e)),n=this.urlencode(d);if("public"===t)n.length&&(o+="?"+n);else{this.checkRequiredCredentials();let e=this.seconds().toString(),t=this.nonce().toString(),s="";n.length?(r=this.json(d),s=this.hash(this.encode(r),"md5","base64")):r="";let h=this.encodeURIComponent(o).toLowerCase(),l=[this.apiKey,i,h,e,t,s].join(""),c=this.base64ToBinary(this.secret),p=this.hmac(this.encode(l),this.encode(c),"sha256","base64");p=this.binaryToString(p),a={Authorization:"amx "+[this.apiKey,p,t,e].join(":")},"POST"===i?(a["Content-Type"]="application/json; charset=UTF-8",a["Content-Length"]=r.length):n.length&&(o+="?"+n,r=void 0)}return{url:o,method:i,body:r,headers:a}}};
//# sourceMappingURL=negociecoins.js.map
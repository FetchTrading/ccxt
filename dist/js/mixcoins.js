"use strict";const e=require("./base/Exchange"),{ExchangeError:t}=require("./base/errors");module.exports=class extends e{describe(){return this.deepExtend(super.describe(),{id:"mixcoins",name:"MixCoins",countries:["GB","HK"],rateLimit:1500,version:"v1",has:{CORS:!1},urls:{logo:"https://user-images.githubusercontent.com/1294454/30237212-ed29303c-9535-11e7-8af8-fcd381cfa20c.jpg",api:"https://mixcoins.com/api",www:"https://mixcoins.com",doc:"https://mixcoins.com/help/api/"},api:{public:{get:["ticker","trades","depth"]},private:{post:["cancel","info","orders","order","transactions","trade"]}},markets:{"BTC/USD":{id:"btc_usd",symbol:"BTC/USD",base:"BTC",quote:"USD",maker:.0015,taker:.0025},"ETH/BTC":{id:"eth_btc",symbol:"ETH/BTC",base:"ETH",quote:"BTC",maker:.001,taker:.0015},"BCH/BTC":{id:"bch_btc",symbol:"BCH/BTC",base:"BCH",quote:"BTC",maker:.001,taker:.0015},"LSK/BTC":{id:"lsk_btc",symbol:"LSK/BTC",base:"LSK",quote:"BTC",maker:.0015,taker:.0025},"BCH/USD":{id:"bch_usd",symbol:"BCH/USD",base:"BCH",quote:"USD",maker:.001,taker:.0015},"ETH/USD":{id:"eth_usd",symbol:"ETH/USD",base:"ETH",quote:"USD",maker:.001,taker:.0015}}})}async fetchBalance(e={}){let t=(await this.privatePostInfo()).result.wallet,s={info:t},i=Object.keys(this.currencies);for(let e=0;e<i.length;e++){let a=i[e],r=a.toLowerCase(),o=this.account();r in t&&(o.free=parseFloat(t[r].avail),o.used=parseFloat(t[r].lock),o.total=this.sum(o.free,o.used)),s[a]=o}return this.parseBalance(s)}async fetchOrderBook(e,t,s={}){let i=await this.publicGetDepth(this.extend({market:this.marketId(e)},s));return this.parseOrderBook(i.result)}async fetchTicker(e,t={}){let s=(await this.publicGetTicker(this.extend({market:this.marketId(e)},t))).result,i=this.milliseconds(),a=this.safeFloat(s,"last");return{symbol:e,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(s,"high"),low:this.safeFloat(s,"low"),bid:this.safeFloat(s,"buy"),bidVolume:void 0,ask:this.safeFloat(s,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:a,last:a,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(s,"vol"),quoteVolume:void 0,info:s}}parseTrade(e,t){let s=1e3*parseInt(e.date);return{id:e.id.toString(),info:e,timestamp:s,datetime:this.iso8601(s),symbol:t.symbol,type:void 0,side:void 0,price:this.safeFloat(e,"price"),amount:this.safeFloat(e,"amount")}}async fetchTrades(e,t,s,i={}){let a=this.market(e),r=await this.publicGetTrades(this.extend({market:a.id},i));return this.parseTrades(r.result,a,t,s)}async createOrder(e,t,s,i,a,r={}){let o={market:this.marketId(e),op:s,amount:i};"market"===t?(o.order_type=1,o.price=a):o.order_type=0;let c=await this.privatePostTrade(this.extend(o,r));return{info:c,id:c.result.id.toString()}}async cancelOrder(e,t,s={}){return await this.privatePostCancel({id:e})}sign(e,t="public",s="GET",i={},a,r){let o=this.urls.api+"/"+this.version+"/"+e;if("public"===t)Object.keys(i).length&&(o+="?"+this.urlencode(i));else{this.checkRequiredCredentials();let e=this.nonce();r=this.urlencode(this.extend({nonce:e},i)),a={"Content-Type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:this.hmac(this.encode(r),this.secret,"sha512")}}return{url:o,method:s,body:r,headers:a}}async request(e,s="public",i="GET",a={},r,o){let c=await this.fetch2(e,s,i,a,r,o);if("status"in c&&200===c.status)return c;throw new t(this.id+" "+this.json(c))}};
//# sourceMappingURL=mixcoins.js.map
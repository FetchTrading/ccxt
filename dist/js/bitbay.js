"use strict";const e=require("./base/Exchange"),{InvalidNonce:t,InsufficientFunds:s,AuthenticationError:i,InvalidOrder:a,ExchangeError:o}=require("./base/errors");module.exports=class extends e{describe(){return this.deepExtend(super.describe(),{id:"bitbay",name:"BitBay",countries:["MT","EU"],rateLimit:1e3,has:{CORS:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766132-978a7bd8-5ece-11e7-9540-bc96d1e9bbb8.jpg",www:"https://bitbay.net",api:{public:"https://bitbay.net/API/Public",private:"https://bitbay.net/API/Trading/tradingApi.php"},doc:["https://bitbay.net/public-api","https://bitbay.net/account/tab-api","https://github.com/BitBayNet/API"],fees:"https://bitbay.net/en/fees"},api:{public:{get:["{id}/all","{id}/market","{id}/orderbook","{id}/ticker","{id}/trades"]},private:{post:["info","trade","cancel","orderbook","orders","transfer","withdraw","history","transactions"]}},markets:{"BTC/USD":{id:"BTCUSD",symbol:"BTC/USD",base:"BTC",quote:"USD",baseId:"BTC",quoteId:"USD"},"BTC/EUR":{id:"BTCEUR",symbol:"BTC/EUR",base:"BTC",quote:"EUR",baseId:"BTC",quoteId:"EUR"},"BTC/PLN":{id:"BTCPLN",symbol:"BTC/PLN",base:"BTC",quote:"PLN",baseId:"BTC",quoteId:"PLN"},"LTC/USD":{id:"LTCUSD",symbol:"LTC/USD",base:"LTC",quote:"USD",baseId:"LTC",quoteId:"USD"},"LTC/EUR":{id:"LTCEUR",symbol:"LTC/EUR",base:"LTC",quote:"EUR",baseId:"LTC",quoteId:"EUR"},"LTC/PLN":{id:"LTCPLN",symbol:"LTC/PLN",base:"LTC",quote:"PLN",baseId:"LTC",quoteId:"PLN"},"LTC/BTC":{id:"LTCBTC",symbol:"LTC/BTC",base:"LTC",quote:"BTC",baseId:"LTC",quoteId:"BTC"},"ETH/USD":{id:"ETHUSD",symbol:"ETH/USD",base:"ETH",quote:"USD",baseId:"ETH",quoteId:"USD"},"ETH/EUR":{id:"ETHEUR",symbol:"ETH/EUR",base:"ETH",quote:"EUR",baseId:"ETH",quoteId:"EUR"},"ETH/PLN":{id:"ETHPLN",symbol:"ETH/PLN",base:"ETH",quote:"PLN",baseId:"ETH",quoteId:"PLN"},"ETH/BTC":{id:"ETHBTC",symbol:"ETH/BTC",base:"ETH",quote:"BTC",baseId:"ETH",quoteId:"BTC"},"LSK/USD":{id:"LSKUSD",symbol:"LSK/USD",base:"LSK",quote:"USD",baseId:"LSK",quoteId:"USD"},"LSK/EUR":{id:"LSKEUR",symbol:"LSK/EUR",base:"LSK",quote:"EUR",baseId:"LSK",quoteId:"EUR"},"LSK/PLN":{id:"LSKPLN",symbol:"LSK/PLN",base:"LSK",quote:"PLN",baseId:"LSK",quoteId:"PLN"},"LSK/BTC":{id:"LSKBTC",symbol:"LSK/BTC",base:"LSK",quote:"BTC",baseId:"LSK",quoteId:"BTC"},"BCH/USD":{id:"BCCUSD",symbol:"BCH/USD",base:"BCH",quote:"USD",baseId:"BCC",quoteId:"USD"},"BCH/EUR":{id:"BCCEUR",symbol:"BCH/EUR",base:"BCH",quote:"EUR",baseId:"BCC",quoteId:"EUR"},"BCH/PLN":{id:"BCCPLN",symbol:"BCH/PLN",base:"BCH",quote:"PLN",baseId:"BCC",quoteId:"PLN"},"BCH/BTC":{id:"BCCBTC",symbol:"BCH/BTC",base:"BCH",quote:"BTC",baseId:"BCC",quoteId:"BTC"},"BTG/USD":{id:"BTGUSD",symbol:"BTG/USD",base:"BTG",quote:"USD",baseId:"BTG",quoteId:"USD"},"BTG/EUR":{id:"BTGEUR",symbol:"BTG/EUR",base:"BTG",quote:"EUR",baseId:"BTG",quoteId:"EUR"},"BTG/PLN":{id:"BTGPLN",symbol:"BTG/PLN",base:"BTG",quote:"PLN",baseId:"BTG",quoteId:"PLN"},"BTG/BTC":{id:"BTGBTC",symbol:"BTG/BTC",base:"BTG",quote:"BTC",baseId:"BTG",quoteId:"BTC"},"DASH/USD":{id:"DASHUSD",symbol:"DASH/USD",base:"DASH",quote:"USD",baseId:"DASH",quoteId:"USD"},"DASH/EUR":{id:"DASHEUR",symbol:"DASH/EUR",base:"DASH",quote:"EUR",baseId:"DASH",quoteId:"EUR"},"DASH/PLN":{id:"DASHPLN",symbol:"DASH/PLN",base:"DASH",quote:"PLN",baseId:"DASH",quoteId:"PLN"},"DASH/BTC":{id:"DASHBTC",symbol:"DASH/BTC",base:"DASH",quote:"BTC",baseId:"DASH",quoteId:"BTC"},"GAME/USD":{id:"GAMEUSD",symbol:"GAME/USD",base:"GAME",quote:"USD",baseId:"GAME",quoteId:"USD"},"GAME/EUR":{id:"GAMEEUR",symbol:"GAME/EUR",base:"GAME",quote:"EUR",baseId:"GAME",quoteId:"EUR"},"GAME/PLN":{id:"GAMEPLN",symbol:"GAME/PLN",base:"GAME",quote:"PLN",baseId:"GAME",quoteId:"PLN"},"GAME/BTC":{id:"GAMEBTC",symbol:"GAME/BTC",base:"GAME",quote:"BTC",baseId:"GAME",quoteId:"BTC"},"XRP/USD":{id:"XRPUSD",symbol:"XRP/USD",base:"XRP",quote:"USD",baseId:"XRP",quoteId:"USD"},"XRP/EUR":{id:"XRPEUR",symbol:"XRP/EUR",base:"XRP",quote:"EUR",baseId:"XRP",quoteId:"EUR"},"XRP/PLN":{id:"XRPPLN",symbol:"XRP/PLN",base:"XRP",quote:"PLN",baseId:"XRP",quoteId:"PLN"},"XRP/BTC":{id:"XRPBTC",symbol:"XRP/BTC",base:"XRP",quote:"BTC",baseId:"XRP",quoteId:"BTC"},"XIN/BTC":{id:"XINBTC",symbol:"XIN/BTC",base:"XIN",quote:"BTC",baseId:"XIN",quoteId:"BTC"}},fees:{trading:{maker:.003,taker:.0043},funding:{withdraw:{BTC:9e-4,LTC:.005,ETH:.00126,LSK:.2,BCH:6e-4,GAME:.005,DASH:.001,BTG:8e-4,PLN:4,EUR:1.5}}},exceptions:{400:o,401:a,402:a,403:a,404:a,405:a,406:s,408:a,501:i,502:i,503:t,504:o,505:i,506:i,509:o,510:o}})}async fetchBalance(e={}){let t=await this.privatePostInfo();if("balances"in t){let e=t.balances,s={info:e},i=Object.keys(this.currencies);for(let t=0;t<i.length;t++){let a=i[t],o=this.currencies[a].id,d=this.account();o in e&&(d.free=parseFloat(e[o].available),d.used=parseFloat(e[o].locked),d.total=this.sum(d.free,d.used)),s[a]=d}return this.parseBalance(s)}throw new o(this.id+" empty balance response "+this.json(t))}async fetchOrderBook(e,t,s={}){let i=await this.publicGetIdOrderbook(this.extend({id:this.marketId(e)},s));return this.parseOrderBook(i)}async fetchTicker(e,t={}){let s=await this.publicGetIdTicker(this.extend({id:this.marketId(e)},t)),i=this.milliseconds(),a=this.safeFloat(s,"volume"),o=this.safeFloat(s,"vwap"),d=a*o,b=this.safeFloat(s,"last");return{symbol:e,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(s,"max"),low:this.safeFloat(s,"min"),bid:this.safeFloat(s,"bid"),bidVolume:void 0,ask:this.safeFloat(s,"ask"),askVolume:void 0,vwap:o,open:void 0,close:b,last:b,previousClose:void 0,change:void 0,percentage:void 0,average:this.safeFloat(s,"average"),baseVolume:a,quoteVolume:d,info:s}}parseTrade(e,t){let s=1e3*e.date;return{id:e.tid,info:e,timestamp:s,datetime:this.iso8601(s),symbol:t.symbol,type:void 0,side:e.type,price:e.price,amount:e.amount}}async fetchTrades(e,t,s,i={}){let a=this.market(e),o=await this.publicGetIdTrades(this.extend({id:a.id},i));return this.parseTrades(o,a,t,s)}async createOrder(e,t,s,i,a,d={}){if("limit"!==t)throw new o(this.id+" allows limit orders only");let b=this.market(e);return this.privatePostTrade(this.extend({type:s,currency:b.baseId,amount:i,payment_currency:b.quoteId,rate:a},d))}async cancelOrder(e,t,s={}){return await this.privatePostCancel({id:e})}isFiat(e){return e in{USD:!0,EUR:!0,PLN:!0}}async withdraw(e,t,s,i,a={}){this.checkAddress(s),await this.loadMarkets();let o=void 0,d={currency:this.currency(e).id,quantity:t};return this.isFiat(e)?o="privatePostWithdraw":(o="privatePostTransfer",void 0!==i&&(s+="?dt="+i.toString()),d.address=s),{info:await this[o](this.extend(d,a)),id:void 0}}sign(e,t="public",s="GET",i={},a,o){let d=this.urls.api[t];if("public"===t){let t=this.omit(i,this.extractParams(e));d+="/"+this.implodeParams(e,i)+".json",d+="?"+this.urlencode(t)}else this.checkRequiredCredentials(),o=this.urlencode(this.extend({method:e,moment:this.nonce()},i)),a={"Content-Type":"application/x-www-form-urlencoded","API-Key":this.apiKey,"API-Hash":this.hmac(this.encode(o),this.encode(this.secret),"sha512")};return{url:d,method:s,body:o,headers:a}}handleErrors(e,t,s,i,a,d){if("string"==typeof d&&!(d.length<2||"{"!==d[0]&&"["!==d[0])){let e=JSON.parse(d);if("code"in e){let t=e.code;const s=this.id+" "+this.json(e),i=this.exceptions;throw t in this.exceptions?new i[t](s):new o(s)}}}};
//# sourceMappingURL=bitbay.js.map
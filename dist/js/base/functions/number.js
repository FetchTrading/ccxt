"use strict";const{isString:t,isNumber:r}=require("./type"),{max:n}=Math,e={ROUND:0,TRUNCATE:1,DECIMAL_PLACES:0,SIGNIFICANT_DIGITS:1,NO_PADDING:0,PAD_WITH_ZERO:1};function o(r){if(t(r))return r;if(Math.abs(r)<1){const t=r.toString(),n=parseInt(t.split("e-")[1]),e="-"===t[0];n&&(r*=Math.pow(10,n-1),r=(e?"-":"")+"0."+new Array(n).join("0")+r.toString().substring(e?3:2))}else{let t=parseInt(r.toString().split("+")[1]);t>20&&(t-=20,r/=Math.pow(10,t),r+=new Array(t+1).join("0"))}return r.toString()}const i=[],s=(t,r=0)=>{if(t=o(t),r>0){const n=i[r]||(i[r]=new RegExp("([-]*\\d+\\.\\d{"+r+"})(\\d)")),[,e]=t.toString().match(n)||[null,t];return e.toString()}return parseInt(t).toString()};module.exports={numberToString:o,precisionFromString:function(t){const r=t.replace(/0+$/g,"").split(".");return r.length>1?r[1].length:0},decimalToPrecision:(t,r,e,i=0,s=0)=>{if(e<0)throw new Error("negative precision is not yet supported");const a=o(t),l="-"===a[0],c=l?1:0,g=a.length;for(var u=0;u<g&&"."!==a[u];u++);const I=u<a.length,p=new Uint8Array(g-c+(I?0:1));p[0]=48;let A=p.length,S=-1,h=-1;for(var f=1,N=c;N<g;N++,f++){const t=a.charCodeAt(N);if(46===t)A=f--;else{if(t<48||t>57)throw new Error(`${a}: invalid number (contains an illegal character '${a[f-1]}')`);p[f]=t,48!==t&&S<0&&(S=f)}}S<0&&(S=1);let C=0===i?A:S,D=C+e;h=-1;for(let t=p.length-1,n=0;t>=0;t--){let o=p[t];0!==t?(o+=n,t>=C+e&&(o=0===r&&o>=53&&(53!==o||!n)?58:48),o>57?(o=48,n=1):n=0):n&&(o=49),p[t]=o,48!==o&&(S=t,h=h<0?t+1:h)}1===i&&(D=(C=S)+e);const T=S>=A?A-1:S,_=h<A?A:h,w=l?1:0,E=w+(A-T),d=n(_-A,0),m=_-T,P=n((0===s?m:D-T)-m,0),R=E+1+d,y=R+P,G=d+P===0,M=new Uint8Array(E+(G?0:1)+d+P);for(l&&(M[0]=45),f=w,N=T;f<E;f++,N++)M[f]=p[N];for(G||(M[E]=46),f=E+1,N=A;f<R;f++,N++)M[f]=p[N];for(f=R;f<y;f++)M[f]=48;return String.fromCharCode(...M)},truncate_to_string:s,truncate:(t,r=0)=>parseFloat(s(t,r)),precisionConstants:e,ROUND:0,TRUNCATE:1,DECIMAL_PLACES:0,SIGNIFICANT_DIGITS:1,NO_PADDING:0,PAD_WITH_ZERO:1};
//# sourceMappingURL=number.js.map
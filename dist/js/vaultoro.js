"use strict";const e=require("./base/Exchange");module.exports=class extends e{describe(){return this.deepExtend(super.describe(),{id:"vaultoro",name:"Vaultoro",countries:"CH",rateLimit:1e3,version:"1",has:{CORS:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766880-f205e870-5ee9-11e7-8fe2-0d5b15880752.jpg",api:"https://api.vaultoro.com",www:"https://www.vaultoro.com",doc:"https://api.vaultoro.com"},commonCurrencies:{GLD:"Gold"},api:{public:{get:["bidandask","buyorders","latest","latesttrades","markets","orderbook","sellorders","transactions/day","transactions/hour","transactions/month"]},private:{get:["balance","mytrades","orders"],post:["buy/{symbol}/{type}","cancel/{id}","sell/{symbol}/{type}","withdraw"]}}})}async fetchMarkets(){let e=[],t=(await this.publicGetMarkets()).data,s=t.MarketCurrency,a=t.BaseCurrency,i=this.commonCurrencyCode(s),r=this.commonCurrencyCode(a),o=i+"/"+r,d=t.MarketName;return e.push({id:d,symbol:o,base:i,quote:r,baseId:s,quoteId:a,info:t}),e}async fetchBalance(e={}){await this.loadMarkets();let t=(await this.privateGetBalance()).data,s={info:t};for(let e=0;e<t.length;e++){let a=t[e],i=a.currency_code.toUpperCase(),r=i;i in this.currencies_by_id[i]&&(r=this.currencies_by_id[i].code);let o=a.cash,d=a.reserved,l={free:o,used:d,total:this.sum(o,d)};s[r]=l}return this.parseBalance(s)}async fetchOrderBook(e,t,s={}){await this.loadMarkets();let a=await this.publicGetOrderbook(s),i={bids:a.data[0].b,asks:a.data[1].s};return this.parseOrderBook(i,void 0,"bids","asks","Gold_Price","Gold_Amount")}async fetchTicker(e,t={}){await this.loadMarkets();let s=await this.publicGetBidandask(t),a=s.bids.length,i=s.bids[a-1],r=s.asks[0],o=(await this.publicGetMarkets(t)).data,d=this.milliseconds(),l=this.safeFloat(o,"LastPrice");return{symbol:e,timestamp:d,datetime:this.iso8601(d),high:this.safeFloat(o,"24hHigh"),low:this.safeFloat(o,"24hLow"),bid:i[0],bidVolume:void 0,ask:r[0],askVolume:void 0,vwap:void 0,open:void 0,close:l,last:l,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:void 0,quoteVolume:this.safeFloat(o,"24hVolume"),info:o}}parseTrade(e,t){let s=this.parse8601(e.Time);return{id:void 0,info:e,timestamp:s,datetime:this.iso8601(s),symbol:t.symbol,order:void 0,type:void 0,side:void 0,price:e.Gold_Price,amount:e.Gold_Amount}}async fetchTrades(e,t,s,a={}){await this.loadMarkets();let i=this.market(e),r=await this.publicGetTransactionsDay(a);return this.parseTrades(r,i,t,s)}async createOrder(e,t,s,a,i,r={}){await this.loadMarkets();let o=this.market(e),d="privatePost"+this.capitalize(s)+"SymbolType",l=await this[d](this.extend({symbol:o.quoteId.toLowerCase(),type:t,gld:a,price:i||1},r));return{info:l,id:l.data.Order_ID}}async cancelOrder(e,t,s={}){return await this.loadMarkets(),await this.privatePostCancelId(this.extend({id:e},s))}sign(e,t="public",s="GET",a={},i,r){let o=this.urls.api+"/";if("public"===t)o+=e;else{this.checkRequiredCredentials();let t=this.nonce();o+=this.version+"/"+this.implodeParams(e,a);let s=this.extend({nonce:t,apikey:this.apiKey},this.omit(a,this.extractParams(e)));o+="?"+this.urlencode(s),i={"Content-Type":"application/json","X-Signature":this.hmac(this.encode(o),this.encode(this.secret))}}return{url:o,method:s,body:r,headers:i}}};
//# sourceMappingURL=vaultoro.js.map
"use strict";const e=require("./base/Exchange"),{ExchangeError:t}=require("./base/errors");module.exports=class extends e{describe(){return this.deepExtend(super.describe(),{id:"btctradeua",name:"BTC Trade UA",countries:"UA",rateLimit:3e3,has:{CORS:!0,createMarketOrder:!1,fetchOpenOrders:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27941483-79fc7350-62d9-11e7-9f61-ac47f28fcd96.jpg",api:"https://btc-trade.com.ua/api",www:"https://btc-trade.com.ua",doc:"https://docs.google.com/document/d/1ocYA0yMy_RXd561sfG3qEPZ80kyll36HUxvCRe5GbhE/edit"},api:{public:{get:["deals/{symbol}","trades/sell/{symbol}","trades/buy/{symbol}","japan_stat/high/{symbol}"]},private:{post:["auth","ask/{symbol}","balance","bid/{symbol}","buy/{symbol}","my_orders/{symbol}","order/status/{id}","remove/order/{id}","sell/{symbol}"]}},markets:{"BCH/UAH":{id:"bch_uah",symbol:"BCH/UAH",base:"BCH",quote:"UAH"},"BTC/UAH":{id:"btc_uah",symbol:"BTC/UAH",base:"BTC",quote:"UAH",precision:{price:1},limits:{amount:{min:1e-10}}},"DASH/BTC":{id:"dash_btc",symbol:"DASH/BTC",base:"DASH",quote:"BTC"},"DASH/UAH":{id:"dash_uah",symbol:"DASH/UAH",base:"DASH",quote:"UAH"},"DOGE/BTC":{id:"doge_btc",symbol:"DOGE/BTC",base:"DOGE",quote:"BTC"},"DOGE/UAH":{id:"doge_uah",symbol:"DOGE/UAH",base:"DOGE",quote:"UAH"},"ETH/UAH":{id:"eth_uah",symbol:"ETH/UAH",base:"ETH",quote:"UAH"},"ITI/UAH":{id:"iti_uah",symbol:"ITI/UAH",base:"ITI",quote:"UAH"},"KRB/UAH":{id:"krb_uah",symbol:"KRB/UAH",base:"KRB",quote:"UAH"},"LTC/BTC":{id:"ltc_btc",symbol:"LTC/BTC",base:"LTC",quote:"BTC"},"LTC/UAH":{id:"ltc_uah",symbol:"LTC/UAH",base:"LTC",quote:"UAH"},"NVC/BTC":{id:"nvc_btc",symbol:"NVC/BTC",base:"NVC",quote:"BTC"},"NVC/UAH":{id:"nvc_uah",symbol:"NVC/UAH",base:"NVC",quote:"UAH"},"PPC/BTC":{id:"ppc_btc",symbol:"PPC/BTC",base:"PPC",quote:"BTC"},"SIB/UAH":{id:"sib_uah",symbol:"SIB/UAH",base:"SIB",quote:"UAH"},"XMR/UAH":{id:"xmr_uah",symbol:"XMR/UAH",base:"XMR",quote:"UAH"},"ZEC/UAH":{id:"zec_uah",symbol:"ZEC/UAH",base:"ZEC",quote:"UAH"}},fees:{trading:{maker:.001,taker:.001},funding:{withdraw:{BTC:6e-4,LTC:.01,NVC:.01,DOGE:10}}}})}signIn(){return this.privatePostAuth()}async fetchBalance(e={}){let t=await this.privatePostBalance(),s={info:t};if("accounts"in t){let e=t.accounts;for(let t=0;t<e.length;t++){let i=e[t],a=i.currency,o=parseFloat(i.balance);s[a]={free:o,used:0,total:o}}}return this.parseBalance(s)}async fetchOrderBook(e,t,s={}){let i=this.market(e),a=await this.publicGetTradesBuySymbol(this.extend({symbol:i.id},s)),o=await this.publicGetTradesSellSymbol(this.extend({symbol:i.id},s)),r={bids:[],asks:[]};return a&&"list"in a&&(r.bids=a.list),o&&"list"in o&&(r.asks=o.list),this.parseOrderBook(r,void 0,"bids","asks","price","currency_trade")}async fetchTicker(e,t={}){let s=(await this.publicGetJapanStatHighSymbol(this.extend({symbol:this.marketId(e)},t))).trades,i=this.milliseconds(),a={symbol:e,timestamp:i,datetime:this.iso8601(i),high:void 0,low:void 0,bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:void 0,open:void 0,close:void 0,last:void 0,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:void 0,quoteVolume:void 0,info:s},o=s.length;if(o>0){for(let e=Math.max(o-48,0);e<s.length;e++){let t=s[e];void 0===a.open&&(a.open=t[1]),(void 0===a.high||a.high<t[2])&&(a.high=t[2]),(void 0===a.low||a.low>t[3])&&(a.low=t[3]),void 0===a.baseVolume?a.baseVolume=-t[5]:a.baseVolume-=t[5]}let e=o-1;a.last=s[e][4],a.close=a.last,a.baseVolume=-1*a.baseVolume}return a}convertCyrillicMonthNameToString(e){let t={"января":"01","февраля":"02","марта":"03","апреля":"04","мая":"05","июня":"06","июля":"07","августа":"08","сентября":"09","октября":"10","ноября":"11","декабря":"12"},s=void 0;return e in t&&(s=t[e]),s}parseCyrillicDatetime(e){let s=e.split(" "),i=s[0],a=this.convertCyrillicMonthNameToString(s[1]);if(!a)throw new t(this.id+" parseTrade() undefined month name: "+e);let o=s[2],r=s[4];7===r.length&&(r="0"+r),1===i.length&&(i="0"+i);let l=[o,a,i].join("-")+"T"+r,d=this.parse8601(l),n=[a,i].join("");return(n=parseInt(n))<325||n>1028?d-72e5:d-108e5}parseTrade(e,t){let s=this.parseCyrillicDatetime(e.pub_date);return{id:e.id.toString(),info:e,timestamp:s,datetime:this.iso8601(s),symbol:t.symbol,type:"limit",side:e.type,price:this.safeFloat(e,"price"),amount:this.safeFloat(e,"amnt_trade")}}async fetchTrades(e,t,s,i={}){let a=this.market(e),o=await this.publicGetDealsSymbol(this.extend({symbol:a.id},i)),r=[];for(let e=0;e<o.length;e++)o[e].id%2&&r.push(o[e]);return this.parseTrades(r,a,t,s)}async createOrder(e,s,i,a,o,r={}){if("market"===s)throw new t(this.id+" allows limit orders only");let l=this.market(e),d="privatePost"+this.capitalize(i)+"Id",n={count:a,currency1:l.quote,currency:l.base,price:o};return this[d](this.extend(n,r))}async cancelOrder(e,t,s={}){return await this.privatePostRemoveOrderId({id:e})}parseOrder(e,t){let s=this.milliseconds;return{id:e.id,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:void 0,status:"open",symbol:t.symbol,type:void 0,side:e.type,price:e.price,amount:e.amnt_trade,filled:0,remaining:e.amnt_trade,trades:void 0,info:e}}async fetchOpenOrders(e,s,i,a={}){if(void 0===e)throw new t(this.id+" fetchOpenOrders requires a symbol argument");let o=this.market(e),r=(await this.privatePostMyOrdersSymbol(this.extend({symbol:o.id},a))).your_open_orders;return this.parseOrders(r,o,s,i)}nonce(){return this.milliseconds()}sign(e,t="public",s="GET",i={},a,o){let r=this.urls.api+"/"+this.implodeParams(e,i),l=this.omit(i,this.extractParams(e));if("public"===t)Object.keys(l).length&&(r+=this.implodeParams(e,l));else{this.checkRequiredCredentials();let e=this.nonce(),t=(o=this.urlencode(this.extend({out_order_id:e,nonce:e},l)))+this.secret;a={"public-key":this.apiKey,"api-sign":this.hash(this.encode(t),"sha256"),"Content-Type":"application/x-www-form-urlencoded"}}return{url:r,method:s,body:o,headers:a}}};
//# sourceMappingURL=btctradeua.js.map
"use strict";const e=require("./liqui.js"),{ExchangeError:t,InsufficientFunds:i,DDoSProtection:s}=require("./base/errors");module.exports=class extends e{describe(){return this.deepExtend(super.describe(),{id:"yobit",name:"YoBit",countries:"RU",rateLimit:3e3,version:"3",has:{createDepositAddress:!0,fetchDepositAddress:!0,CORS:!1,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766910-cdcbfdae-5eea-11e7-9859-03fea873272d.jpg",api:{public:"https://yobit.net/api",private:"https://yobit.net/tapi"},www:"https://www.yobit.net",doc:"https://www.yobit.net/en/api/",fees:"https://www.yobit.net/en/fees/"},api:{public:{get:["depth/{pair}","info","ticker/{pair}","trades/{pair}"]},private:{post:["ActiveOrders","CancelOrder","GetDepositAddress","getInfo","OrderInfo","Trade","TradeHistory","WithdrawCoinsToAddress"]}},fees:{trading:{maker:.002,taker:.002},funding:{withdraw:{}}},commonCurrencies:{AIR:"AirCoin",ANI:"ANICoin",ANT:"AntsCoin",AST:"Astral",ATM:"Autumncoin",BCC:"BCH",BCS:"BitcoinStake",BLN:"Bulleon",BTS:"Bitshares2",CAT:"BitClave",COV:"Coven Coin",CPC:"Capricoin",CS:"CryptoSpots",DCT:"Discount",DGD:"DarkGoldCoin",DROP:"FaucetCoin",ERT:"Eristica Token",ICN:"iCoin",KNC:"KingN Coin",LIZI:"LiZi",LOC:"LocoCoin",LOCX:"LOC",LUN:"LunarCoin",MDT:"Midnight",NAV:"NavajoCoin",NBT:"NiceBytes",OMG:"OMGame",STK:"StakeCoin",SUB:"Subscriptio",PAY:"EPAY",PLC:"Platin Coin",REP:"Republicoin",RUR:"RUB",XIN:"XINCoin"},options:{fetchOrdersRequiresSymbol:!0}})}parseOrderStatus(e){let t={0:"open",1:"closed",2:"canceled",3:"open"};return e in t?t[e]:e}async fetchBalance(e={}){await this.loadMarkets();let t=(await this.privatePostGetInfo()).return,i={info:t},s={free:"funds",total:"funds_incl_orders"},r=Object.keys(s);for(let e=0;e<r.length;e++){let o=r[e],n=s[o];if(n in t){let e=Object.keys(t[n]);for(let s=0;s<e.length;s++){let r=e[s],a=r.toUpperCase(),d=this.commonCurrencyCode(a),c=void 0;(c=d in i?i[d]:this.account())[o]=t[n][r],void 0!==c.total&&void 0!==c.free&&(c.used=c.total-c.free),i[d]=c}}}return this.parseBalance(i)}async createDepositAddress(e,t={}){let i=await this.fetchDepositAddress(e,this.extend({need_new:1},t)),s=this.safeString(i,"address");return this.checkAddress(s),{currency:e,address:s,status:"ok",info:i.info}}async fetchDepositAddress(e,t={}){await this.loadMarkets();let i={coinName:this.currency(e).id,need_new:0},s=await this.privatePostGetDepositAddress(this.extend(i,t)),r=this.safeString(s.return,"address");return this.checkAddress(r),{currency:e,address:r,status:"ok",info:s}}async withdraw(e,t,i,s,r={}){this.checkAddress(i),await this.loadMarkets();let o=this.currency(e);return{info:await this.privatePostWithdrawCoinsToAddress(this.extend({coinName:o.id,amount:t,address:i},r)),id:void 0}}handleErrors(e,r,o,n,a,d){if("{"===d[0]){let e=JSON.parse(d);if("success"in e&&!e.success){if("error_log"in e){if(e.error_log.indexOf("Insufficient funds")>=0)throw new i(this.id+" "+this.json(e));if("Requests too often"===e.error_log)throw new s(this.id+" "+this.json(e));if("not available"===e.error_log||"external service unavailable"===e.error_log)throw new s(this.id+" "+this.json(e))}throw new t(this.id+" "+this.json(e))}}}};
//# sourceMappingURL=yobit.js.map
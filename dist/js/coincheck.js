"use strict";const e=require("./base/Exchange"),{ExchangeError:t,NotSupported:s}=require("./base/errors");module.exports=class extends e{describe(){return this.deepExtend(super.describe(),{id:"coincheck",name:"coincheck",countries:["JP","ID"],rateLimit:1500,has:{CORS:!1},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766464-3b5c3c74-5ed9-11e7-840e-31b32968e1da.jpg",api:"https://coincheck.com/api",www:"https://coincheck.com",doc:"https://coincheck.com/documents/exchange/api"},api:{public:{get:["exchange/orders/rate","order_books","rate/{pair}","ticker","trades"]},private:{get:["accounts","accounts/balance","accounts/leverage_balance","bank_accounts","deposit_money","exchange/orders/opens","exchange/orders/transactions","exchange/orders/transactions_pagination","exchange/leverage/positions","lending/borrows/matches","send_money","withdraws"],post:["bank_accounts","deposit_money/{id}/fast","exchange/orders","exchange/transfers/to_leverage","exchange/transfers/from_leverage","lending/borrows","lending/borrows/{id}/repay","send_money","withdraws"],delete:["bank_accounts/{id}","exchange/orders/{id}","withdraws/{id}"]}},markets:{"BTC/JPY":{id:"btc_jpy",symbol:"BTC/JPY",base:"BTC",quote:"JPY"}}})}async fetchBalance(e={}){let t=await this.privateGetAccountsBalance(),s={info:t},i=Object.keys(this.currencies);for(let e=0;e<i.length;e++){let a=i[e],r=a.toLowerCase(),o=this.account();r in t&&(o.free=parseFloat(t[r]));let n=r+"_reserved";n in t&&(o.used=parseFloat(t[n])),o.total=this.sum(o.free,o.used),s[a]=o}return this.parseBalance(s)}async fetchOrderBook(e,t,i={}){if("BTC/JPY"!==e)throw new s(this.id+" fetchOrderBook () supports BTC/JPY only");let a=await this.publicGetOrderBooks(i);return this.parseOrderBook(a)}async fetchTicker(e,t={}){if("BTC/JPY"!==e)throw new s(this.id+" fetchTicker () supports BTC/JPY only");let i=await this.publicGetTicker(t),a=1e3*i.timestamp,r=this.safeFloat(i,"last");return{symbol:e,timestamp:a,datetime:this.iso8601(a),high:this.safeFloat(i,"high"),low:this.safeFloat(i,"low"),bid:this.safeFloat(i,"bid"),bidVolume:void 0,ask:this.safeFloat(i,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:r,last:r,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(i,"volume"),quoteVolume:void 0,info:i}}parseTrade(e,t){let s=this.parse8601(e.created_at);return{id:e.id.toString(),timestamp:s,datetime:this.iso8601(s),symbol:t.symbol,type:void 0,side:e.order_type,price:this.safeFloat(e,"rate"),amount:this.safeFloat(e,"amount"),info:e}}async fetchTrades(e,i,a,r={}){if("BTC/JPY"!==e)throw new s(this.id+" fetchTrades () supports BTC/JPY only");let o=this.market(e),n=await this.publicGetTrades(this.extend({pair:o.id},r));if("success"in n&&n.success&&void 0!==n.data)return this.parseTrades(n.data,o,i,a);throw new t(this.id+" "+this.json(n))}async createOrder(e,t,s,i,a,r={}){let o={pair:this.marketId(e)};if("market"===t){let e=t+"_"+s;o.order_type=e,o[("buy"===s?e+"_":"")+"amount"]=i}else o.order_type=s,o.rate=a,o.amount=i;let n=await this.privatePostExchangeOrders(this.extend(o,r));return{info:n,id:n.id.toString()}}async cancelOrder(e,t,s={}){return await this.privateDeleteExchangeOrdersId({id:e})}sign(e,t="public",s="GET",i={},a,r){let o=this.urls.api+"/"+this.implodeParams(e,i),n=this.omit(i,this.extractParams(e));if("public"===t)Object.keys(n).length&&(o+="?"+this.urlencode(n));else{this.checkRequiredCredentials();let e=this.nonce().toString(),t="";"GET"===s?Object.keys(n).length&&(o+="?"+this.urlencode(this.keysort(n))):Object.keys(n).length&&(t=r=this.urlencode(this.keysort(n)));let i=e+o+t;a={"Content-Type":"application/x-www-form-urlencoded","ACCESS-KEY":this.apiKey,"ACCESS-NONCE":e,"ACCESS-SIGNATURE":this.hmac(this.encode(i),this.encode(this.secret))}}return{url:o,method:s,body:r,headers:a}}async request(e,s="public",i="GET",a={},r,o){let n=await this.fetch2(e,s,i,a,r,o);if("public"===s)return n;if("success"in n&&n.success)return n;throw new t(this.id+" "+this.json(n))}};
//# sourceMappingURL=coincheck.js.map